### 索引是什么

- 索引是对数据库中一或多个列值的排序，帮助数据库高效获取数据的数据结构
- 假如我们用类比的方法，数据库中的索引就相当于书籍中的目录一样，当我们想找到书中的摸个知识点，我们可以直接去目录中找而不是在书中每页的找，但是这也抛出了索引的一个缺点，在对数据库修改的时候要修改索引到导致时间变多。
- 几个基本的索引类型 普通索引 唯一索引 主键索引 全文索引
- 索引优点:
- · 加快检索速度
- · 唯一索引确保每行数据的唯一性
- · 在使用索引的过程可以优化隐藏器，提高系统性能
- 索引缺点
- · 插入删除 修改 维护速度下降
- · 占用物理和数据空间  

### 事务的作用

- 事务(Transaction)是并发控制的基本单位。事务就是一系列的操作，这些操作要么都执行，要么都不执行。
- 事务具有以下4个基本特征
- · Atomic(原子性) 事务中的一系列的操作要么都完成，要么全部失败
- · Consistency(一致性) 一个成功的事务应该讲数据写入的到数据库，否则就要回滚到最初的状态
- · Isolation(隔离性) 并发访问和修改的duli
- · Durability(持久性) 事务结束应该讲事务的处理结构存储起来
- 事务的语句
- · 开始事物：BEGIN TRANSACTION
- · 提交事物：COMMIT TRANSACTION
- · 回滚事务：ROLLBACK TRANSACTION

### 数据库中的乐观锁和悲观锁

- 根据不同类型可以对数据设置不同的锁权限
- ** 乐观 悲观 锁 主要是作用在并发访问控制**
- · 悲观锁 假定会发生并发冲突，屏蔽任何违反数据完整的操作
- · 乐观锁 假定不会发生冲突，只有在提交操作时检查是否违反数据的完整性

### Drop、Delete 、Truncate的区别

- 三者都是删除的意思，但是三者有些区别
- · delete和truncate只删除表的数据不删除表的结构
- · 速度 drop > truncate > delete
- · 想删除部分数据时， delete 删除时要带上where语句
- · 保留表而想删除所有的数据时用truncate
- drop直接删掉表 truncate删除表中数据，再插入时自增长id又从1开始 delete删除表中数据，可以加where字句。

- (DELETE语句执行删除的过程是每次从表中删除一行，并且同时将该行的删除操作作为事务记录在日志中保存以便进行进行回滚操作。TRUNCATE TABLE 则一次性地从表中删除所有的数据并不把单独的删除操作记录记入日志保存，删除行是不能恢复的。并且在删除的过程中不会激活与表有关的删除触发器。执行速度快。
- 表和索引所占空间。当表被TRUNCATE 后，这个表和索引所占用的空间会恢复到初始大小，而DELETE操作不会减少表或索引所占用的空间。drop语句将表所占用的空间全释放掉。
- 应用范围。TRUNCATE 只能对table; DELETE可以是table和view
- TRUNCATE 和DELETE只删除数据，而DROP则删除整个表(结构和数据)。
-  truncate与不带where的delete ：只删除数据，而不删除表的结构(定义)drop语句将删除表的结构被依赖的约束(constrain),触发器(trigger)索引(index);依赖于该表的存储过程/函数将被保留，但其状态会变为：invalid。
-  delete语句为DML(data maintain Language),这个操作会被放到 rollback segment中,事务提交后才生效。如果有相应的 tigger,执行的时候将被触发。
-  truncate、drop是DLL(data define language),操作立即生效，原数据不放到 rollback segment中，不能回滚
- 在没有备份情况下，谨慎使用 drop 与 truncate。要删除部分数据行采用delete且注意结合where来约束影响范围。回滚段要足够大。要删除表用drop;若想保留表而将表中数据删除，如果于事务无关，用truncate即可实现。如果和事务有关，或老师想触发trigger,还是用delete。
- Truncate table 表名 速度快,而且效率高,因为:
- truncate table 在功能上与不带 WHERE 子句的 DELETE 语句相同：二者均删除表中的全部行。但 TRUNCATE TABLE 比 DELETE 速度快，且使用的系统和事务日志资源少。DELETE 语句每次删除一行，并在事务日志中为所删除的每行记录一项。TRUNCATE TABLE 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。
- TRUNCATE TABLE 删除表中的所有行，但表结构及其列、约束、索引等保持不变。新行标识所用的计数值重置为该列的种子。如果想保留标识计数值，请改用 DELETE。如果要删除表定义及其数据，请使用 DROP TABLE 语句。
- 对于由 FOREIGN KEY 约束引用的表，不能使用 TRUNCATE TABLE，而应使用不带 WHERE 子句的 DELETE 语句。由于 TRUNCATE TABLE 不记录在日志中，所以它不能激活触发器。

###  超键 、候选键 、主键 、外键的 区别

- 超键     ：在关系中能唯一标识元组的属性集称为关系模式的超键，一个或多个属性组合在一起作为超键。
- 候选键 ：最下超键，没有冗余元素的超键
- 主键     ： 数据库中表中唯一和完整标识的数据列或属性集合。
- 外键     ：在一个表中存在另外一个表的主键叫做外键

### 数据库三大范式介绍

- 1NF 字段是最小单元，不可再分
- 2NF 满足1NF 表中字段必须完全依赖全部主键而并非部分主键
-  3NF 满足2NF，非主键外的所有字段必须互不依赖

### 数据库事务的四个特性及含义

- 数据库事务transanction正确执行的四个基本要素。
- ACID,原子性(Atomicity)、一致性(Correspondence)、隔离性(Isolation)、持久性(Durability)。
- 原子性:整个事务中的所有操作，要么全部完成，要么全部不完成，不可能停滞在中间某个环节。事务在执行过程中发生错误，会被回滚(Rollback)到事务开始前的状态，就像这个事务从来没有执行过一样。
- 一致性:在事务开始之前和事务结束以后，数据库的完整性约束没有被破坏。
- 隔离性:隔离状态执行事务，使它们好像是系统在给定时间内执行的唯一操作。如果有两个事务，运行在相同的时间内，执行 相同的功能，事务的隔离性将确保每一事务在系统中认为只有该事务在使用系统。这种属性有时称为串行化，为了防止事务操作间的混淆，必须串行化或序列化请求，使得在同一时间仅有一个请求用于同一数据。
- 持久性:在事务完成以后，该事务所对数据库所作的更改便持久的保存在数据库之中，并不会被回滚。

### 视图的作用，视图可以更改么

- 视图是虚拟的表，与包含数据的表不一样，视图只包含使用时动态检索数据的查询;不包含任何列或数据。使用视图可以简化复杂的sql操作，隐藏具体的细节，保护数据;视图创建后，可以使用与表相同的方式利用它们。
- 视图不能被索引，也不能有关联的触发器或默认值，如果视图本身内有order by 则对视图再次order by将被覆盖。
- 创建视图：create view XXX as XXXXXXXXXXXXXX;
- 对于某些视图比如未使用联结子查询分组聚集函数Distinct Union等，是可以对其更新的，对视图的更新将对基表进行更新;但是视图主要用于简化检索，保护数据，并不用于更新，而且大部分视图都不可以更新。

### mysql_fetch_row() 和 mysql_fetch_array()的区别

- 这两个函数，返回的都是一个数组
- 区别就是第一个函数返回的数组是只包含值，我们只能row[0],row[1],这样以数组下标来读取数据，
- 而mysql_fetch_array()返回的数组既包含第一种，也包含键值对的形式
- 我们可以这样读取数据，(假如数据库的字段是 username,passwd):row[‘username‘],row[‘passwd‘。

### 排序的规则

- 排序使用 order by 语句，order by 后面跟上排序字段，排序字段后面可以放多个，多个采用逗号分隔
- order by  采用默认排序，如果存在 where 语句，那么 order  by 必须要放在where后面。
- 升序 ：asc 
- 降序 ：desc

### 函数的分类，经常使用的函数

- 数据处理函数
- lower

- upper
- substr
- length
- trim(去首尾空格，不会去除中间的空格)
- str_to_date(%Y-%m-%d)
- date_format
- format(保留小数)
- roundrand()随机数
- if null（如果为空，则替换为0）
- 聚合函数/分组函数
- 分组函数自动忽略空值

- count
- sum
- avg
- min
- max

### 分组查询注意条件

- 如果使用了order by，order by 必须放到group by后面。
- 在sql语句中，select语句后面只能跟分组函数+参与分组的字段。
- 如果想要对分组数据再进行过滤需要使用having子句。

### 什么是存储过程、用什么来调用

- 存储过程是一个预编译的SQL语句，优点是允许模块化的设计，
- 就是说只需创建一次，以后在该程序中就可以调用多次。
- 如果某次操作需要执行多次SQL，使用存储过程比单纯SQL语句执行要快。
- 可以用一个命令对象来调用存储过程。



